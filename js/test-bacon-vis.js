(function() {
  var BaconVis, d3Vis, trackClicks, visualizer;

  BaconVis = window.BaconVis;

  visualizer = BaconVis.createVisualizer();

  trackClicks = function() {
    return $('body').asEventStream('click').map('you clicked!!!').doAction(visualizer.recordBaconEvent).log();
  };

  d3Vis = function() {
    var axis, data, duration, height, marbleGroup, margin, n, now, svg, tick, width, x, y;
    n = 243;
    duration = 750;
    now = new Date(Date.now() - duration);
    data = [Date.now() - (10 * duration), Date.now() - (150 * duration)];
    margin = {
      top: 6,
      right: 0,
      bottom: 20,
      left: 40
    };
    width = 960 - margin.right;
    height = 120 - margin.top - margin.bottom;
    x = d3.time.scale().domain([now - (n - 2) * duration, now - duration]).range([0, width]);
    y = d3.scale.linear().range([height, 0]);
    svg = d3.select("svg#marbles").attr("width", width + margin.left + margin.right).attr("height", height + margin.top + margin.bottom).style("margin-left", -margin.left + "px").append("g").attr("transform", "translate(" + margin.left + "," + margin.top + ")");
    svg.append("defs").append("clipPath").attr("id", "clip").append("rect").attr("width", width).attr("height", height);
    axis = svg.append("g").attr("class", "x axis").attr("transform", "translate(0," + height + ")").call(x.axis = d3.svg.axis().scale(x).orient("bottom"));
    marbleGroup = svg.append("g");
    tick = function() {
      var marbles;
      now = new Date();
      x.domain([now - (n - 2) * duration, now - duration]);
      marbleGroup.attr("transform", null);
      marbles = marbleGroup.selectAll(".marble").data(data);
      marbles.enter().append("circle").attr("class", "marble").attr("r", 20);
      marbles.exit().remove();
      marbles.attr("cx", function(d) {
        return x(d);
      }).attr("cy", y(0));
      axis.transition().duration(duration).ease("linear").call(x.axis);
      marbleGroup.transition().duration(duration).ease("linear").attr("transform", "translate(" + x(now - (n - 1) * duration) + ")").each("end", tick);
      return console.log("translate(" + x(now - (n - 1) * duration) + ")");
    };
    return tick();
  };

  $(d3Vis);

}).call(this);

//# sourceMappingURL=data:application/json;base64,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LEVBRWEsRUFGYixDQWxCQSxDQUFBO0FBQUEsTUFxQkEsT0FBTyxDQUFDLElBQVIsQ0FBQSxDQUFjLENBQUMsTUFBZixDQUFBLENBckJBLENBQUE7QUFBQSxNQXVCQSxPQUFPLENBQUMsSUFBUixDQUFhLElBQWIsRUFBbUIsU0FBQyxDQUFELEdBQUE7ZUFBTSxDQUFBLENBQUUsQ0FBRixFQUFOO01BQUEsQ0FBbkIsQ0FFSSxDQUFDLElBRkwsQ0FFVSxJQUZWLEVBRWdCLENBQUEsQ0FBRSxDQUFGLENBRmhCLENBdkJBLENBQUE7QUFBQSxNQTRCQSxJQUFJLENBQUMsVUFBTCxDQUFBLENBQ0ksQ0FBQyxRQURMLENBQ2MsUUFEZCxDQUVJLENBQUMsSUFGTCxDQUVVLFFBRlYsQ0FHSSxDQUFDLElBSEwsQ0FHVSxDQUFDLENBQUMsSUFIWixDQTVCQSxDQUFBO0FBQUEsTUFrQ0EsV0FBVyxDQUFDLFVBQVosQ0FBQSxDQUNJLENBQUMsUUFETCxDQUNjLFFBRGQsQ0FFSSxDQUFDLElBRkwsQ0FFVSxRQUZWLENBR0ksQ0FBQyxJQUhMLENBR1UsV0FIVixFQUd1QixZQUFBLEdBQWUsQ0FBQSxDQUFFLEdBQUEsR0FBTSxDQUFDLENBQUEsR0FBSSxDQUFMLENBQUEsR0FBVSxRQUFsQixDQUFmLEdBQTZDLEdBSHBFLENBSUksQ0FBQyxJQUpMLENBSVUsS0FKVixFQUlpQixJQUpqQixDQWxDQSxDQUFBO2FBd0NBLE9BQU8sQ0FBQyxHQUFSLENBQVksWUFBQSxHQUFlLENBQUEsQ0FBRSxHQUFBLEdBQU0sQ0FBQyxDQUFBLEdBQUksQ0FBTCxDQUFBLEdBQVUsUUFBbEIsQ0FBZixHQUE2QyxHQUF6RCxFQTFDSztJQUFBLENBbkRQLENBQUE7V0FrR0EsSUFBQSxDQUFBLEVBbkdNO0VBQUEsQ0FYUixDQUFBOztBQUFBLEVBa0hBLENBQUEsQ0FBRSxLQUFGLENBbEhBLENBQUE7QUFBQSIsImZpbGUiOiJ0ZXN0LWJhY29uLXZpcy5qcyIsInNvdXJjZVJvb3QiOiIvc291cmNlLyIsInNvdXJjZXNDb250ZW50IjpbIkJhY29uVmlzID0gd2luZG93LkJhY29uVmlzXG52aXN1YWxpemVyID0gQmFjb25WaXMuY3JlYXRlVmlzdWFsaXplcigpXG5cbnRyYWNrQ2xpY2tzID0gLT5cbiAgJCgnYm9keScpXG4gICAgLmFzRXZlbnRTdHJlYW0oJ2NsaWNrJylcbiAgICAubWFwKCAneW91IGNsaWNrZWQhISEnIClcbiAgICAuZG9BY3Rpb24oIHZpc3VhbGl6ZXIucmVjb3JkQmFjb25FdmVudCApXG4gICAgLmxvZygpXG5cblxuZDNWaXMgPSAtPlxuICBuID0gMjQzXG4gIGR1cmF0aW9uID0gNzUwXG4gIG5vdyA9IG5ldyBEYXRlKERhdGUubm93KCkgLSBkdXJhdGlvbilcbiAgI2NvdW50ID0gMFxuICAjZGF0YSA9IGQzLnJhbmdlKG4pLm1hcCggLT4gMCApXG4gIFxuICBkYXRhID0gWyBEYXRlLm5vdygpIC0gKDEwKmR1cmF0aW9uKSwgRGF0ZS5ub3coKSAtICgxNTAqZHVyYXRpb24pIF1cblxuICBtYXJnaW4gPSB7dG9wOiA2LCByaWdodDogMCwgYm90dG9tOiAyMCwgbGVmdDogNDB9XG4gIHdpZHRoID0gOTYwIC0gbWFyZ2luLnJpZ2h0XG4gIGhlaWdodCA9IDEyMCAtIG1hcmdpbi50b3AgLSBtYXJnaW4uYm90dG9tXG5cbiAgeCA9IGQzLnRpbWUuc2NhbGUoKVxuICAgICAgLmRvbWFpbihbbm93IC0gKG4gLSAyKSAqIGR1cmF0aW9uLCBub3cgLSBkdXJhdGlvbl0pXG4gICAgICAucmFuZ2UoWzAsIHdpZHRoXSlcblxuICB5ID0gZDMuc2NhbGUubGluZWFyKClcbiAgICAgIC5yYW5nZShbaGVpZ2h0LCAwXSlcblxuICAjbGluZSA9IGQzLnN2Zy5saW5lKClcbiAgICAgICMuaW50ZXJwb2xhdGUoXCJiYXNpc1wiKVxuICAgICAgIy54KCAoZCwgaSktPiB4KG5vdyAtIChuIC0gMSAtIGkpICogZHVyYXRpb24pIClcbiAgICAgICMueSggKGQsIGkpLT4geShkKSApXG5cbiAgc3ZnID0gZDMuc2VsZWN0KFwic3ZnI21hcmJsZXNcIilcbiAgICAgIC5hdHRyKFwid2lkdGhcIiwgd2lkdGggKyBtYXJnaW4ubGVmdCArIG1hcmdpbi5yaWdodClcbiAgICAgIC5hdHRyKFwiaGVpZ2h0XCIsIGhlaWdodCArIG1hcmdpbi50b3AgKyBtYXJnaW4uYm90dG9tKVxuICAgICAgLnN0eWxlKFwibWFyZ2luLWxlZnRcIiwgLW1hcmdpbi5sZWZ0ICsgXCJweFwiKVxuICAgIC5hcHBlbmQoXCJnXCIpXG4gICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZShcIiArIG1hcmdpbi5sZWZ0ICsgXCIsXCIgKyBtYXJnaW4udG9wICsgXCIpXCIpXG5cbiAgc3ZnLmFwcGVuZChcImRlZnNcIikuYXBwZW5kKFwiY2xpcFBhdGhcIilcbiAgICAgIC5hdHRyKFwiaWRcIiwgXCJjbGlwXCIpXG4gICAgLmFwcGVuZChcInJlY3RcIilcbiAgICAgIC5hdHRyKFwid2lkdGhcIiwgd2lkdGgpXG4gICAgICAuYXR0cihcImhlaWdodFwiLCBoZWlnaHQpO1xuXG4gIGF4aXMgPSBzdmcuYXBwZW5kKFwiZ1wiKVxuICAgICAgLmF0dHIoXCJjbGFzc1wiLCBcInggYXhpc1wiKVxuICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgXCJ0cmFuc2xhdGUoMCxcIiArIGhlaWdodCArIFwiKVwiKVxuICAgICAgLmNhbGwoeC5heGlzID0gZDMuc3ZnLmF4aXMoKS5zY2FsZSh4KS5vcmllbnQoXCJib3R0b21cIikpXG5cbiAgbWFyYmxlR3JvdXAgPSBzdmcuYXBwZW5kKFwiZ1wiKVxuICAgICAgIy5hdHRyKFwiY2xpcC1wYXRoXCIsIFwidXJsKCNjbGlwKVwiKVxuICAgICMuYXBwZW5kKFwicGF0aFwiKVxuICAgICAgIy5kYXRhKFtkYXRhXSlcbiAgICAgICMuYXR0cihcImNsYXNzXCIsIFwibGluZVwiKVxuXG4gICNkMy5zZWxlY3Qod2luZG93KVxuICAgICMub24oXCJzY3JvbGxcIiwgLT4gKytjb3VudCApXG5cbiAgdGljayA9IC0+XG4gICAgIy8vIHVwZGF0ZSB0aGUgZG9tYWluc1xuICAgIG5vdyA9IG5ldyBEYXRlKClcbiAgICB4LmRvbWFpbihbbm93IC0gKG4gLSAyKSAqIGR1cmF0aW9uLCBub3cgLSBkdXJhdGlvbl0pXG4gICAgI3kuZG9tYWluKFswLCBkMy5tYXgoZGF0YSldKVxuXG4gICAgIy8vIHB1c2ggdGhlIGFjY3VtdWxhdGVkIGNvdW50IG9udG8gdGhlIGJhY2ssIGFuZCByZXNldCB0aGUgY291bnRcbiAgICAjIGRhdGEucHVzaChNYXRoLm1pbigzMCwgY291bnQpKVxuICAgICMgY291bnQgPSAwO1xuXG4gICAgIy8vIHJlZHJhdyB0aGUgbGluZVxuICAgICNzdmcuc2VsZWN0KFwiLmxpbmVcIilcbiAgICAgICAgIy5hdHRyKFwiZFwiLCBsaW5lKVxuICAgICAgICAjLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgbnVsbCk7XG4gICAgXG4gICAgbWFyYmxlR3JvdXAuYXR0cihcInRyYW5zZm9ybVwiLG51bGwpXG5cbiAgICBtYXJibGVzID0gbWFyYmxlR3JvdXAuc2VsZWN0QWxsKFwiLm1hcmJsZVwiKVxuICAgICAgLmRhdGEoZGF0YSlcblxuICAgIG1hcmJsZXMuZW50ZXIoKS5hcHBlbmQoXCJjaXJjbGVcIilcbiAgICAgIC5hdHRyKFwiY2xhc3NcIixcIm1hcmJsZVwiKVxuICAgICAgLmF0dHIoXCJyXCIsIDIwKVxuICAgIG1hcmJsZXMuZXhpdCgpLnJlbW92ZSgpXG5cbiAgICBtYXJibGVzLmF0dHIoXCJjeFwiLCAoZCktPiB4KGQpIClcbiAgICAgICAgIy54KCAoZCwgaSktPiB4KG5vdyAtIChuIC0gMSAtIGkpICogZHVyYXRpb24pIClcbiAgICAgICAgLmF0dHIoXCJjeVwiLCB5KDApKVxuXG4gICAgIy8vIHNsaWRlIHRoZSB4LWF4aXMgbGVmdFxuICAgIGF4aXMudHJhbnNpdGlvbigpXG4gICAgICAgIC5kdXJhdGlvbihkdXJhdGlvbilcbiAgICAgICAgLmVhc2UoXCJsaW5lYXJcIilcbiAgICAgICAgLmNhbGwoeC5heGlzKVxuXG4gICAgIy8vIHNsaWRlIHRoZSBsaW5lIGxlZnRcbiAgICBtYXJibGVHcm91cC50cmFuc2l0aW9uKClcbiAgICAgICAgLmR1cmF0aW9uKGR1cmF0aW9uKVxuICAgICAgICAuZWFzZShcImxpbmVhclwiKVxuICAgICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZShcIiArIHgobm93IC0gKG4gLSAxKSAqIGR1cmF0aW9uKSArIFwiKVwiKVxuICAgICAgICAuZWFjaChcImVuZFwiLCB0aWNrKVxuICAgICAgICBcbiAgICBjb25zb2xlLmxvZyhcInRyYW5zbGF0ZShcIiArIHgobm93IC0gKG4gLSAxKSAqIGR1cmF0aW9uKSArIFwiKVwiKVxuXG4gICAgIy8vIHBvcCB0aGUgb2xkIGRhdGEgcG9pbnQgb2ZmIHRoZSBmcm9udFxuICAgICNkYXRhLnNoaWZ0KClcblxuICB0aWNrKClcblxuXG4jJCh0cmFja0NsaWNrcylcbiQoZDNWaXMpXG4iXX0=